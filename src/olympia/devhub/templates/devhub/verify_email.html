{% extends "devhub/base.html" %}

{% set title = _('Email Address Verification') %}

{% block title %}{{ dev_page_title(title) }}{% endblock %}

{% block content %}
<h1>{{ title }}</h1>
<div id="{{ state }}">
{% if state == "email_verified" %}
  {% trans %}
  Your email address is verified.
  {% endtrans %}
{% elif state == "email_suppressed" %}
  {% trans %}
  Please verify your email by clicking "Verify email" above.
  {% endtrans %}
{% elif state == "verification_expired" %}
  {% trans %}
  Could not verify email address. The verification link has expired.
  {% endtrans %}
{% elif state == "verification_pending" %}
  <div class="loader"></div>
  {% if found_emails|length > 0 %}
    <p>
      {% trans %}
      We have attempted to send your verification email but ran into an issue.
      Below are the records we found and the associated delivery status.
      This page will refresh automatically in 10 seconds to check again.
      You can click 'try again' to attempt sending another email.
      {% endtrans %}
    </p>
    <ul>
    {% for email in found_emails %}
      <li>
        Subject: {{ email.subject }} ({{ email.status}})
      </li>
    {% endfor %}
    </ul>
  {% else %}
    {% trans %}
    Working... Please be patient.
    {% endtrans %}
  {% endif %}
{% elif state == "verification_timedout" %}
  {% trans %}
  This is taking longer than expected. Try again.
  {% endtrans %}
{% elif state == "confirmation_pending" %}
  {% trans email=request.user.email %}
  An email with a confirmation link has been sent to your email address: {{ email }}. Please click the link to confirm your email address. If you did not receive the email, please check your spam folder.
  {% endtrans %}
{% elif state == "confirmation_invalid" %}
  {% trans email=request.user.email %}
    The provided code is invalid. Please use the link in the email sent to your email address {{ email }}.
    - could be unauthorized
    - could be expired
    - could be a mistake
  {% endtrans %}
{% endif %}
{% if render_button %}
  {% with submit_text=button_text %}
    {% include 'devhub/verify_email_form.html' %}
  {% endwith %}
{% endif %}
</div>
{% endblock %}
