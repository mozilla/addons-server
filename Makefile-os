.PHONY: help_redirect
help_redirect:
	@$(MAKE) help --no-print-directory

.PHONY: help_submake
help_submake:
	@echo "Host only commands:"
	@echo "  shell             to connect to a running addons-server docker shell"
	@echo "  update_docker     to update all the docker images"
	@echo "All other commands will be passed through to the docker 'web' container make:"
	@make -f Makefile-docker help_submake

.PHONY: update_docker
update_docker:
	docker-compose exec worker make update_deps
	docker-compose exec web make update
	docker-compose restart web
	docker-compose restart worker

.PHONY: shell
shell:
	docker-compose exec web bash

%: ## This directs any other recipe (command) to the web container's make.
	docker-compose exec web make $(MAKECMDGOALS) ARGS=$(ARGS)

# You probably want to put new commands in Makefile-docker, unless they operate
# on multiple containers or are host-os specific.
